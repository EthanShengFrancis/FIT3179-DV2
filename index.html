<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Malaysia Tourism Dashboard</title>
    
    <!-- Vega Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5.22.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.5.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.21.0"></script>
    
    <!-- Pure CSS Framework -->
    <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.3/build/pure-min.css"
        integrity="sha384-cg6SkqEOCV1NbJoCu11+bm0NvBRc8IYLRGXkmNrqUBfTjmMYwNKPWBTIKyw9mHNJ" crossorigin="anonymous">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* ========================================
           GLOBAL RESET & BASE STYLES
           ======================================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Open Sans', sans-serif;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }

        /* ========================================
           MAIN CONTAINER
           ======================================== */
        .page-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 60px 40px; /* Consistent top/bottom spacing */
        }

        /* ========================================
           HEADER SECTION
           ======================================== */
        .page-header {
            text-align: center;
            margin-bottom: 80px; /* White space below header */
            padding: 50px 30px;
            background: #ffffff;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }

        .page-header h1 {
            font-family: 'Times New Roman', Times, serif;
            font-size: 3em;
            color: #1a1a1a;
            margin-bottom: 15px;
            line-height: 1.2; /* Improved sight lines */
        }

        .page-header p {
            color: #555;
            font-size: 1.1em;
            max-width: 700px; /* Controlled line length */
            margin: 0 auto;
            line-height: 1.8; /* Comfortable reading */
        }

        /* Metadata - Author/Date */
        .metadata {
            margin-top: 20px;
            font-size: 0.85em;
            color: #888;
            font-style: italic;
        }

        /* ========================================
           CHART SECTION CONTAINERS
           ======================================== */
        .chart-section {
            background: white;
            border-radius: 12px;
            padding: 40px; /* Generous internal padding */
            margin-bottom: 60px; /* Consistent white space between sections */
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            transition: box-shadow 0.3s ease;
        }

        .chart-section:hover {
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
        }

        /* ========================================
           SECTION HEADERS
           ======================================== */
        .section-header {
            margin-bottom: 30px; /* White space below header */
            padding-bottom: 20px;
            border-bottom: 3px solid #e8e8e8;
        }

        .section-header h2 {
            font-size: 1.9em;
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: 700;
            line-height: 1.3; /* Clear sight lines */
            max-width: 600px; /* Not more than 10 words per line */
        }

        .section-header p {
            color: #666;
            font-size: 1em;
            line-height: 1.8; /* Comfortable reading */
            margin: 8px 0;
            max-width: 800px; /* Controlled line length */
        }

        .section-header p strong {
            color: #2c3e50;
        }

        /* ========================================
           VISUALIZATION CONTAINERS
           ======================================== */
        
        /* Standard visualization container */
        .vis-container {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 30px 0; /* White space around visualizations */
            min-height: 400px;
        }

        /* CRITICAL FIX: Allow interaction with controls */
        .vis-container-interactive {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 30px 0;
            pointer-events: auto !important; /* Enable all interactions */
        }

        .vis-container-interactive * {
            pointer-events: auto !important; /* Enable child interactions */
        }

        /* Horizontal side-by-side layout for GDP and Flights */
        .horizontal-dual-container {
            display: flex;
            flex-direction: row;
            gap: 30px; /* White space between side-by-side charts */
            align-items: flex-start;
            justify-content: center;
            flex-wrap: wrap; /* Allow wrapping on smaller screens */
        }

        .horizontal-dual-item {
            flex: 1;
            min-width: 450px; /* Minimum width before wrapping */
            max-width: 550px; /* Maximum width to prevent overflow */
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Connecting text between charts */
        .chart-connection-text {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 30px 0;
            border-radius: 8px;
            font-size: 1em;
            line-height: 1.8;
            color: #444;
        }

        .chart-connection-text strong {
            color: #667eea;
        }

        /* Sub-section headers for stacked charts */
        .chart-subsection-header {
            margin-bottom: 20px;
            text-align: center;
        }

        .chart-subsection-header h3 {
            font-size: 1.4em;
            color: #2c3e50;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .chart-subsection-header p {
            color: #666;
            font-size: 0.95em;
            max-width: 600px; /* Controlled line length */
            margin: 0 auto;
            line-height: 1.7;
        }

        /* ========================================
           RESPONSIVE DESIGN
           ======================================== */
        @media (max-width: 1200px) {
            .page-header h1 {
                font-size: 2.5em;
            }
        }

        @media (max-width: 768px) {
            .page-container {
                padding: 40px 20px;
            }

            .page-header h1 {
                font-size: 2em;
            }
            
            .section-header h2 {
                font-size: 1.5em;
            }
            
            .chart-section {
                padding: 25px;
            }

            /* Stack charts vertically on mobile */
            .horizontal-dual-item {
                min-width: 100%;
                max-width: 100%;
            }
        }

        /* ========================================
           CUSTOM SCROLLBAR
           ======================================== */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>

<body>
    <div class="page-container">
        
        <!-- ========================================
             MAIN HEADER
             ======================================== -->
        <div class="page-header">
            <h1>Malaysia's Tourism Industry Overview</h1>
            <p>
                Comprehensive Analysis of Tourist Arrivals,
                Economic Indicators & Regional Distribution
            </p>
            <p class="metadata">
                Created by [Your Name] | Data: 2019-2024 | Last Updated: October 2024
            </p>
        </div>

        <!-- ========================================
             SECTION 1: CHOROPLETH MAP
             ======================================== -->
        <div class="chart-section">
            <div class="section-header">
                <h2>Global Tourist Arrivals by Country</h2>
                <p>
                    Interactive map showing tourist arrivals
                    to Malaysia from different countries.
                </p>
                <p>
                    Use the year slider below
                    to explore trends from 2019 to 2024.
                </p>
                <p><strong>Key Insight:</strong> 
                    Singapore consistently leads in tourist arrivals.
                    China showed 593.4% growth from 2022 to 2023.
                </p>
            </div>
            <!-- CRITICAL: Use interactive container for map with slider -->
            <div class="vis-container-interactive">
                <div id="choropleth_map"></div>
            </div>
        </div>

        <!-- ========================================
             SECTION 2: BUMP CHART (RANKINGS)
             ======================================== -->
        <div class="chart-section">
            <div class="section-header">
                <h2>Top Countries Ranking Evolution</h2>
                <p>
                    Track how the top 6 source countries
                    changed rankings from 2019 to 2024.
                </p>
                <p><strong>Key Insight:</strong> 
                    Countries in <span style="color: #28a745;">green</span> improved rankings.
                    Countries in <span style="color: #dc3545;">red</span> declined in rankings.
                </p>
            </div>
            <div class="vis-container-interactive">
                <div id="bump_chart"></div>
            </div>
        </div>

        <!-- ========================================
             SECTION 3: ECONOMIC & AVIATION (VERTICAL STACK)
             ======================================== -->
        <div class="chart-section">
            <div class="section-header">
                <h2>Economic Growth & Average Flights Weekly </h2>
                <p>
                    As you can see the bubble chart, the amount of flights
                    and seats increases across all regions and can be correlated
                    with the rise in GDP after 2022 as 2021 GDP
                    decrease heavily due to covid restrictions.
                </p>
            </div>

            <div class="vertical-stack-container">
                
                <!-- GDP Chart (Top) -->
                <div class="vertical-stack-item">
                    <div class="chart-subsection-header">
                        <h3>GDP Growth Rate (2019-2024)</h3>
                        <p>
                            Covid 19 affected Malaysia's economy in 2020-2021,
                            followed by recovery in 2022-2024.
                        </p>
                    </div>
                    <div class="vis-container">
                        <div id="bar_chart"></div>
                    </div>
                </div>

                <!-- Aviation Chart (Bottom) -->
                <div class="vertical-stack-item">
                    <div class="chart-subsection-header">
                        <h3>Weekly Flights and Seats (2022-2024)</h3>
                        <p>
                            The overall trend of the chart increases through out
                            2022 to 2024. The increase in flights would contribute to
                            the rise in GDP after covid restrictions were lifted.
                        </p>
                    </div>
                    <div class="vis-container">
                        <div id="arrivals_bubble"></div>
                    </div>
                </div>

            </div>
        </div>

        <!-- ========================================
             SECTION 4: MONTHLY ARRIVALS
             ======================================== -->
        <div class="chart-section">
            <div class="section-header">
                <h2>Monthly Arrival Patterns</h2>
                <p><strong>Key Insight:</strong> 
                    2019 held a high standard of visitors through the months 
                    compared to 2020 until 2024. There was a consistent positive
                    difference after 2024 May when the visitor rates were the
                    highest out of all the years, reaching its peak
                    on 2024 December.
                </p>
            </div>
            <div class="vis-container-interactive">
                <div id="monthly_line"></div>
            </div>
        </div>

        <!-- ========================================
             SECTION 5: STATE DISTRIBUTION
             ======================================== -->
        <div class="chart-section">
            <div class="section-header">
                <h2>State-Level Tourist Distribution</h2>
                <p>
                    Pyramid chart comparing domestic versus
                    foreign tourist arrivals by state.
                </p>
                <p><strong>Key Insight:</strong> 
                    Identify which states attract more
                    domestic tourists versus international visitors.
                </p>
            </div>
            <div class="vis-container">
                <div id="butterfly_chart"></div>
            </div>
        </div>

    </div>

  <script type="text/javascript">
    var spec1 = "js/DV2Dashboard.vg.json";
    var spec2 = "js/DV2Bubble.vg.json";
    var spec6 = "js/DV2Bar.vg.json";
    var spec3 = "js/DV2Butterfly.vg.json";
    var spec4 = "js/DV2Bump.vg.json";
    var spec5 = "js/DV2Line.vg.json";

    vegaEmbed('#choropleth_map', spec1, { "actions": false })
      .then(function(result) {})
      .catch(console.error);

    vegaEmbed('#bump_chart', spec4, { "actions": false })
      .then(function(result) {})
      .catch(console.error);

    vegaEmbed('#bar_chart', spec6, { "actions": false })
        .then(function(result) {})
        .catch(console.error);

    vegaEmbed('#arrivals_bubble', spec2, { "actions": false })
      .then(function(result) {})
      .catch(console.error);

    vegaEmbed('#monthly_line', spec5, { "actions": false })
      .then(function(result) {})
      .catch(console.error);

    vegaEmbed('#butterfly_chart', spec3, { "actions": false })
      .then(function(result) {})
      .catch(console.error);
  </script>
</body>
</html>
