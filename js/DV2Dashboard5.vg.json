{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "Stacked area chart of monthly visitor arrivals for multiple years with legend filtering.",
  "data": {
    "url": "https://raw.githubusercontent.com/EthanShengFrancis/FIT3179-DV2/main/data/MonthlyArrivals.csv"
  },
"params": [
  {
    "name": "YearDropdown",
    "value": "2024",
    "bind": {
      "input": "select",
      "options": ["All", "2019", "2020", "2021", "2022", "2023", "2024"],
      "labels": ["All Years", "2019", "2020", "2021", "2022", "2023", "2024"],
      "name": "Select Year: "
    }
  }
],
"transform": [
  {"fold": ["2019","2020","2021","2022","2023","2024"], "as": ["Year","Arrivals"]},
  {"filter": "datum.Year == YearDropdown || YearDropdown == 'All'"}
],
  "mark": {
    "type": "area",
    "interpolate": "monotone",
    "opacity": 0.7
  },
  "encoding": {
    "x": {
      "field": "MONTH",
      "type": "ordinal",
      "sort": [
        "JANUARY", "FEBRUARY", "MARCH", "APRIL", "MAY", "JUNE",
        "JULY", "AUGUST", "SEPTEMBER", "OCTOBER", "NOVEMBER", "DECEMBER"
      ],
      "title": "Month"
    },
    "y": {
      "aggregate": "sum",
      "field": "Arrivals",
      "type": "quantitative",
      "title": "Visitor Arrivals"
    },
    "color": {
      "field": "Year",
      "type": "nominal",
      "title": "Year",
      "scale": {"scheme": "set2"}
    },
    "opacity": {
      "condition": {"param": "YearDropdown", "value": 0.8},
      "value": 0.1
    },
    "tooltip": [
      {"field": "MONTH", "type": "ordinal"},
      {"field": "Year", "type": "nominal"},
      {"field": "Arrivals", "type": "quantitative", "format": ","}
    ]
  },
  "width": 700,
  "height": 400
}