{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {
      "url": "https://raw.githubusercontent.com/EthanShengFrancis/FIT3179-DV2/main/data/HotelGuestByState.csv"
  },
  "transform": [
      {"calculate": "-toNumber(datum['Domestic 2024'])", "as": "DomesticNeg"},
      {"filter": "datum['States'] != 'PENINSULAR MALAYSIA'"},
      {"fold": ["DomesticNeg", "Foreigner 2024"], "as": ["Category", "Value"]},
      {"calculate": "datum.Category == 'DomesticNeg' ? 'Domestic Tourists' : 'Foreigner Tourists'", "as": "TouristType"}
  ],
  "width": 800,
  "height": 650,
  "encoding": {
      "y": {
          "field": "States",
          "type": "nominal",
          "sort": {"field": "Foreigner 2024", "order": "descending"},
          "axis": {"title": "State", "offset": 5, "labelLimit": 120}
      },
      "x": {
          "field": "Value",
          "type": "quantitative",
          "axis": {
              "title": "Number of Tourists (2024)",
              "format": ",",
              "grid": false,
              "labelExpr": "datum.value < 0 ? -datum.value : datum.value"
          }
      },
      "color": {
          "field": "TouristType",
          "type": "nominal",
          "scale": {
              "domain": ["Domestic Tourists", "Foreigner Tourists"],
              "range": ["#0088FF", "#F54927"]
          },
          "legend": {"title": "Type of Tourist"}
      },
      "tooltip": [
          {"field": "Country/Region", "type": "nominal", "title": "Region"},
          {"field": "TouristType", "type": "nominal"},
          {"field": "Value", "type": "quantitative", "format": ","}
      ]
  },
  "mark": {"type": "bar"}
}